:root { --uqam-blue:#005DAA; --maxw:48rem; }
html { scroll-behavior:smooth; }
body { margin:0 auto; max-width:var(--maxw); padding:1rem; font:16px/1.55 system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
h1,h2,h3 { color:var(--uqam-blue); line-height:1.25; margin-top:2rem; }
h1 { font-size:1.8rem; } h2 { font-size:1.4rem; } h3 { font-size:1.2rem; }
p, li { hyphens:auto; }
a { color: var(--uqam-blue); text-decoration: none; }
a:hover { text-decoration: underline; }

/* Tables (e.g., barème) */
table { width:100%; border-collapse:collapse; display:block; overflow-x:auto; }
th, td { border:1px solid #ddd; padding:.5rem; vertical-align:top; }
th { background:#f6f8fa; text-align:left; position:sticky; top:0; }

/* Footnotes as compact endnotes */
section.footnotes, .footnotes { border-top:2px solid #eee; margin-top:3rem; padding-top:1rem; }
sup.note-ref a { text-decoration:none; }

/* Blockquotes / callouts (if present) */
blockquote { border-left:4px solid #cfd9e3; margin:1rem 0; padding:.5rem 1rem; background:#f8fbff; }

/* Lists in bibliography examples: hanging indent */
.bib-entry { padding-left:1.25rem; text-indent:-1.25rem; }

/* Print styles (if someone prints the HTML) */
@media print {
  a[href^="http"]:after { content:" (" attr(href) ")"; font-size:90%; }
  body { color:#000; }
}
/* --- Header & title tuning for long French titles --- */
.site-header { display:flex; flex-wrap:wrap; align-items:flex-start; gap:.75rem; margin-bottom:1rem; }
.site-header h1 {
  flex: 1 1 100%;
  margin: .25rem 0 .25rem;
  line-height: 1.22;
  /* Wrap long titles nicely on phones */
  text-wrap: balance;            /* safe to ignore if unsupported */
  hyphens: auto;
  word-break: normal;
  /* Responsive size: readable on mobile, not huge on desktop */
  font-size: clamp(1.15rem, 1rem + 2.2vw, 1.9rem);
}
.doc-actions { flex: 0 0 auto; }

/* Word-like body spacing */
:root { --lh: 1.35; --para-after: 0.6rem; }  /* tune if needed */
body { line-height: var(--lh); }
p { margin: 0 0 var(--para-after); }
h1, h2, h3 { margin-top: 1.2rem; margin-bottom: .35rem; }
ul, ol { margin: 0 0 var(--para-after); padding-left: 1.25em; }
li { margin: 0 0 .25rem; }

/* Reusable hanging indent */
.hang { padding-left: 1.4em; text-indent: -1.4em; }

/* Common mappings from our pipeline */
p.Bibliographie, p.bib-entry { padding-left: 1.4em; text-indent: -1.4em; }


/* “Version mobile” pill */
.badge {
  display:inline-block;
  margin-left:.5rem;
  padding:.15rem .5rem;
  border-radius:999px;
  background: var(--uqam-blue);
  color:#fff;
  font-size:.75rem;
  vertical-align: middle;
}

/* Button next to header */
.doc-actions .btn {
  display:inline-block;
  padding:.5rem .75rem;
  border-radius:.5rem;
  border:1px solid #cfd9e3;
  background:#f6f8fa;
}

/* Tweak ToC spacing a touch */
details.toc { margin: .75rem 0 1.25rem; }

/* --- Slim top bar --- */
.topbar {
  display:flex; justify-content:space-between; align-items:center;
  gap:.75rem; padding:.5rem 0; margin-bottom:.5rem;
}
.badge-mobile {
  display:inline-block; padding:.15rem .5rem; border-radius:999px;
  background: var(--uqam-blue); color:#fff; font-size:.75rem;
}
.doc-actions .btn {
  display:inline-block; padding:.5rem .75rem; border-radius:.5rem;
  border:1px solid #cfd9e3; background:#f6f8fa;
}

/* --- Masthead drawn from the DOCX's own first paragraphs --- */
body > p:nth-of-type(-n+5) { /* first five paragraphs */
  text-align:center; margin:.2rem 0;
}

/* Lines 1–3: institution, department, faculty */
body > p:nth-of-type(1),
body > p:nth-of-type(2),
body > p:nth-of-type(3) {
  font-variant-caps: small-caps;
  letter-spacing:.03em; font-weight:600; color:#374151; font-size:.95rem;
}

/* Line 4: the long French title */
body > p:nth-of-type(4) {
  margin:.4rem 0 .2rem;
  /* use the same font as the rest of the site */
  font-family: inherit;
  /* UQAM rubric blue */
  color: var(--uqam-blue);
  /* keep it prominent but mobile-friendly */
  font-weight: 800;                  /* or 700 if you prefer lighter */
  line-height: 1.25;
  font-size: clamp(1.2rem, 1rem + 2.6vw, 2rem);
  text-wrap: balance;                 /* safe no-op if unsupported */
  hyphens: auto;
}

/* Line 5: date */
body > p:nth-of-type(5) {
  color:#6b7280; font-size:.95rem; margin-bottom:.6rem;
}

/* ToC spacing after the masthead */
details.toc { margin: .75rem 0 1.25rem; }

/* Boutons de la topbar */
.doc-actions .btn {
  display:inline-block; padding:.45rem .7rem; border-radius:.5rem;
  border:1px solid #cfd9e3; background:#f6f8fa; text-decoration:none;
  margin-left:.35rem;
}

/* Détails/ToC replié par défaut, propre sur mobile */
details.toc { margin:.75rem 0 1.25rem; border:1px solid #e5e7eb; border-radius:.5rem; padding:.5rem .75rem; background:#fafbfc; }
details.toc summary { cursor:pointer; font-weight:600; color:var(--uqam-blue); }

/* --- Annexes: Modèle de page titre (mobile-friendly mock page) --- */
/* The id that Pandoc generates may drop accents; match both just in case */
section[id*="modele-de-page-titre"],
section[id*="modèle-de-page-titre"] {
  border: 1px solid #e5e7eb;
  border-radius: .6rem;
  background: #fff;
  padding: 1rem clamp(.75rem, 3vw, 1.5rem);
  box-shadow: 0 1px 2px rgba(0,0,0,.05);
  margin: 1rem 0 1.25rem;
}

/* Center lines and give them steady spacing (Word-like) */
section[id*="modele-de-page-titre"] p,
section[id*="modèle-de-page-titre"] p {
  text-align: center;
  margin: .35rem 0;
  line-height: 1.35;
  text-indent: 0; /* ignore global first-line indent inside the mock */
}

/* If Pandoc outputs empty <p> as spacers, give them a visible gap */
section[id*="modele-de-page-titre"] p:empty,
section[id*="modèle-de-page-titre"] p:empty {
  display: block;
  height: .6rem;
}

/* Lines 1–3: institution / department / faculty */
section[id*="modele-de-page-titre"] p:nth-of-type(1),
section[id*="modele-de-page-titre"] p:nth-of-type(2),
section[id*="modele-de-page-titre"] p:nth-of-type(3),
section[id*="modèle-de-page-titre"] p:nth-of-type(1),
section[id*="modèle-de-page-titre"] p:nth-of-type(2),
section[id*="modèle-de-page-titre"] p:nth-of-type(3) {
  font-variant-caps: small-caps;
  letter-spacing: .03em;
  font-weight: 600;
  color: #374151;
  font-size: .95rem;
}

/* Main line “Titre du travail” (roughly the 4th visible paragraph) */
section[id*="modele-de-page-titre"] p:nth-of-type(4),
section[id*="modèle-de-page-titre"] p:nth-of-type(4) {
  font-weight: 700;
  font-size: clamp(1.05rem, 1rem + 1.8vw, 1.5rem);
}

/* Final line with the date (“Jour Mois Année”) */
section[id*="modele-de-page-titre"] p:last-of-type,
section[id*="modèle-de-page-titre"] p:last-of-type {
  color: #6b7280;
  font-size: .95rem;
}

/* --- Annexes: "Modèle de page titre" (rendered as a neat card) --- */
.title-mock {
  max-width: 36rem;              /* narrower, reads better on phones */
  margin: 1rem auto 1.25rem;
  border: 1px solid #e5e7eb;
  border-radius: .6rem;
  background: #fff;
  padding: 1rem clamp(.75rem, 3vw, 1.5rem);
  box-shadow: 0 1px 2px rgba(0,0,0,.05);
}
.title-mock p {
  text-align: center;
  margin: .33rem 0;
  line-height: 1.35;
  text-indent: 0;                 /* ignore any global first-line indent here */
}

/* Lines 1–3: institution / département / faculté */
.title-mock p:nth-of-type(1),
.title-mock p:nth-of-type(2),
.title-mock p:nth-of-type(3) {
  font-variant-caps: small-caps;
  letter-spacing: .04em;
  font-weight: 700;
  color: var(--uqam-blue);
  font-size: .95rem;
}

/* The bold rubric line (e.g., “Travail présenté à”) */
.title-mock p:nth-of-type(4) {
  margin-top: .6rem;
  padding-bottom: .35rem;
  border-bottom: 1px solid #eef2f7;   /* subtle divider */
}
.title-mock p:nth-of-type(4) strong {
  display: inline-block;
  font-weight: 800;
}

/* Final line (date) a little softer */
.title-mock p:last-of-type {
  color: #6b7280;
  font-size: .95rem;
}


/* --- Hanging indents for bibliography examples (now wrapped as .biblio-samples) --- */
.biblio-samples > p,
.biblio-samples > div > p {           /* covers occasional extra wrappers */
  padding-left: 1.4em;
  text-indent: -1.4em;

/* If some examples are lists instead of plain paragraphs */
.biblio-samples li { padding-left: 1.2em; text-indent: -1.2em; }

  /* --- Annexes: "Modèle de page titre" (tagged by Lua as .title-mock) --- */
.title-mock {
  border: 1px solid #e5e7eb;
  border-radius: .6rem;
  background: #fff;
  padding: 1rem clamp(.75rem, 3vw, 1.5rem);
  box-shadow: 0 1px 2px rgba(0,0,0,.05);
  margin: 1rem 0 1.25rem;
}
.title-mock p { text-align:center; margin:.35rem 0; line-height:1.35; text-indent:0; }
.title-mock p:empty { display:block; height:.6rem; }
.title-mock p:nth-of-type(1),
.title-mock p:nth-of-type(2),
.title-mock p:nth-of-type(3) {
  font-variant-caps: small-caps; letter-spacing:.03em; font-weight:600;
  color:#374151; font-size:.95rem;
}
.title-mock p:last-of-type { color:#6b7280; font-size:.95rem; }

/* --- Hanging indent for bibliography samples (when styled in Word) --- */
p.Bibliographie, p.bib-entry, p.hang { padding-left:1.4em; text-indent:-1.4em; }

  /* Image version of the title-page mock */
.title-mock-img img {
  width: 100%;
  height: auto;
  display: block;
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: .6rem;
  box-shadow: 0 1px 2px rgba(0,0,0,.05);
  margin: 1rem auto 1.25rem;
  max-width: 36rem;   /* same visual width as the text card */
}

/* --- Annexes: "Modèle de page titre" (now reliably tagged) --- */
.title-mock {
  max-width: 36rem;
  margin: 1rem auto 1.25rem;
  border: 1px solid #e5e7eb;
  border-radius: .6rem;
  background: #fff;
  padding: 1rem clamp(.75rem, 3vw, 1.5rem);
  box-shadow: 0 1px 2px rgba(0,0,0,.05);
}
.title-mock p { text-align:center; margin:.33rem 0; line-height:1.35; text-indent:0; }
.title-mock p:empty { display:block; height:.6rem; }
.title-mock p:nth-of-type(1),
.title-mock p:nth-of-type(2),
.title-mock p:nth-of-type(3) {
  font-variant-caps: small-caps; letter-spacing:.04em; font-weight:700;
  color: var(--uqam-blue); font-size:.95rem;
}
.title-mock p:nth-of-type(4) { margin-top:.6rem; padding-bottom:.35rem; border-bottom:1px solid #eef2f7; }
.title-mock p:nth-of-type(4) strong { display:inline-block; font-weight:800; }
.title-mock p:last-of-type { color:#6b7280; font-size:.95rem; }

/* --- Hanging indents for bibliography examples --- */
/* The Lua filter wraps the whole section in .biblio-samples so this applies
   even if paragraphs lack a special class. */
.biblio-samples > p, .biblio-samples > div > p {
  padding-left: 1.4em;
  text-indent: -1.4em;
}

/* If your DOCX applies a paragraph style that Pandoc exposes (e.g., Rfrence),
   keep this too so it works outside the examples section if needed. */
p.Rfrence, p.rfrence, p.Bibliographie, p.bib-entry { padding-left:1.4em; text-indent:-1.4em; }  

/* Hanging indent for paragraphs styled "Référence" in Word
   (Pandoc may emit a wrapper Div with that class) */
.ref-entry-block > p { padding-left: 1.4em; text-indent: -1.4em; }

/* Extra safety: if Pandoc applied the class directly on <p> or used variants */
p.Rfrence, p.rfrence, p.Référence, p.référence, p.reference, p.Reference {
  padding-left: 1.4em; text-indent: -1.4em;
}

/* Also apply inside our bibliography example wrapper, if present */
.biblio-samples > p, .biblio-samples > div > p {
  padding-left: 1.4em; text-indent: -1.4em;
}
